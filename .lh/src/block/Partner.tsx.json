{
    "sourceFile": "src/block/Partner.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 8,
            "patches": [
                {
                    "date": 1747725449250,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1747725522171,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,57 +1,243 @@\n 'use client';\n \n-import React, { useEffect, useState } from 'react';\n+import React, { useState, useRef, useEffect } from 'react';\n import styled from 'styled-components';\n-import Image from 'next/image';\n+import { gsap } from 'gsap';\n+import { ScrollTrigger } from 'gsap/ScrollTrigger';\n+import DownloadIcon from '@mui/icons-material/Download';\n+import { useLang } from '@/contexts/LangContext';\n+import { downloadLinks } from '@/lib/i18n/downloadLinks';\n+import { AppColors } from '@/styles/colors';\n+import { AppTextStyles } from '@/styles/textStyles';\n+import CustomBlockLayout from '@/customComponents/CustomBlockLayout';\n+import ResponsiveView from '@/layout/ResponsiveView';\n import { Breakpoints } from '@/constants/layoutConstants';\n-import { AppColors } from '@/styles/colors';\n-import { CustomNavigator } from '@/customComponents/CustomNavigator';\n+import { userStamp } from '@/lib/api/user/api';\n \n-interface EventBlockProps {\n-  slides: { image: string }[];\n-  topLabel: string;\n-  centerLabel: string;\n-  bottomLabel: string;\n-  title: string;\n-  description: string;\n-  onTopArrowClick?: () => void;\n-  onBottomArrowClick?: () => void;\n+interface PartnerProps {\n+  title1: string;\n+  title2: string;\n+  subtitle: string;\n+  tabs: string[];\n+  slides: {\n+    title: string;\n+    image: string;\n+    subtitle: string;\n+    description: string;\n+  }[];\n+  downloadText: string;\n+  onEnterSection?: (index: number, tab: string) => void;\n }\n \n+const Title = styled.h2`\n+  ${AppTextStyles.headline2};\n+  color: ${AppColors.onSurface};\n+  margin-bottom: 0px;\n+  line-height: 1.2;\n+  white-space: pre-line;\n+\n+  @media (max-width: ${Breakpoints.mobile}px) {\n+    font-size: 25px;\n+  }\n+`;\n+\n+const Subtitle = styled.p`\n+  font-size: 16px;\n+  color: #666;\n+  line-height: 1.6;\n+  white-space: pre-line;\n+  margin-bottom: 100px; /* ✅ 모바일 간격 */\n+\n+  @media (max-width: ${Breakpoints.mobile}px) {\n+    font-size: 14px;\n+    white-space: normal;\n+  }\n+`;\n+\n+const Tabs = styled.div`\n+  display: flex;\n+  gap: 24px;\n+  margin-bottom: 10px;\n+  flex-wrap: wrap;\n+`;\n+\n+const Tab = styled.div<{ $active: boolean }>`\n+  font-size: 16px;\n+  font-weight: ${({ $active }) => ($active ? 'bold' : 'normal')};\n+  border-bottom: ${({ $active }) => ($active ? '2px solid #000' : 'none')};\n+  padding-bottom: 4px;\n+  cursor: pointer;\n+  color: ${({ $active }) => ($active ? '#000' : '#888')};\n+`;\n+\n+const Slide = styled.div<{ $isActive: boolean }>`\n+  display: ${({ $isActive }) => ($isActive ? 'block' : 'none')};\n+`;\n+\n const Wrapper = styled.div`\n+  min-width: ${Breakpoints.desktop}px; \n+  background-color: #fff;\n+\n+  @media (max-width: ${Breakpoints.mobile}px) {\n+    min-width: 100%;\n+  }\n+\n+`;\n+\n+\n+\n+const TabTitle = styled.h3`\n+  font-size: 25px;\n+  font-weight: bold;\n+  margin-bottom: 12px;\n+  position: relative;\n+  padding-left: 16px;\n+  color: #000;\n+\n+  &::before {\n+    content: '';\n+    position: absolute;\n+    left: 0;\n+    top: 50%;\n+    transform: translateY(-50%);\n+    width: 8px;\n+    height: 24px;\n+    background-color: #000000;\n+  }\n+\n+  @media (max-width: ${Breakpoints.mobile}px) {\n+    font-size: 18px;\n+  }\n+`;\n+const TabDescription = styled.p`\n+  font-size: 16px;\n+  color: #666;\n+  line-height: 1.6;\n+  margin-top: 8px;\n+\n+  @media (max-width: ${Breakpoints.mobile}px) {\n+    font-size: 14px;\n+  }\n+`;\n+\n+const TabImage = styled.img`\n   width: 100%;\n-  min-width: ${Breakpoints.desktop}px;\n-  background-color: ${AppColors.background};\n+  height: auto;\n+  margin-top: 16px;\n+  margin-bottom: 16px;\n+  border-radius: 8px;\n `;\n \n-const Content = styled.div`\n+const FlexRow = styled.div`\n   display: flex;\n+  width: 100%;\n+  justify-content: space-between;\n+`;\n+\n+const LeftColumn = styled.div`\n+  flex: 1;\n+  display: flex;\n   flex-direction: column;\n+`;\n+\n+const RightColumn = styled.div`\n+  flex-shrink: 0;\n+  display: flex;\n+  flex-direction: column;\n+  justify-content: flex-end;\n+  align-items: flex-end;\n+  padding-bottom: 20px;\n+`;\n+\n+const DownloadLink = styled.a`\n+  font-size: 14px;\n+  color: #000000;\n+  cursor: pointer;\n+  display: flex;\n   align-items: center;\n-  gap: 100px;\n+  justify-content: flex-end;\n+  gap: 8px;\n+  text-decoration: none;\n+  animation: bounceY 1.5s ease-in-out infinite;\n+\n+  @keyframes bounceY {\n+    0%, 100% { transform: translateY(0px); }\n+    50% { transform: translateY(-10px); }\n+  }\n `;\n \n-const ImageBox = styled.div`\n-  width: 1200px;\n-  height: 600px;\n-  border-radius: 16px;\n-  overflow: hidden;\n-  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);\n+const MobileDownloadButton = styled.a`\n+  display: inline-flex;\n+  align-items: center;\n+  width: 100%;\n+  justify-content: center;\n+  padding: 10px 16px;\n+  font-size: 14px;\n+  font-weight: 600;\n+  color: #000;\n+  border: 1px solid #ccc;\n+  border-radius: 6px;\n+  text-decoration: none;\n+  gap: 6px;\n+  margin-top: 0px;\n `;\n \n-export default function EventBlock({\n+const AnimatedDescription = styled.div`\n+  animation: fade 0.5s ease-in-out;\n+\n+  @keyframes fade {\n+    from { opacity: 0; transform: translateY(20px); }\n+    to { opacity: 1; transform: translateY(0); }\n+  }\n+`;\n+\n+const MobileContainer = styled.div`\n+  padding: 24px 20px;\n+`;\n+\n+const SlideWrapper = styled.div`\n+  margin-bottom: 100px;\n+\n+  &:last-of-type {\n+    margin-bottom: 0;\n+  }\n+`;\n+const logButtonClick = async (content: string, memo: string) => {\n+  try {\n+    await userStamp({\n+      uuid: localStorage.getItem('logId') ?? 'anonymous',\n+      category: '버튼',\n+      content,\n+      memo,\n+    });\n+  } catch (e) {\n+  }\n+};\n+\n+\n+const Partner: React.FC<PartnerProps> = ({\n+  title1,\n+  title2,\n+  subtitle,\n+  tabs,\n   slides,\n-  topLabel,\n-  centerLabel,\n-  bottomLabel,\n-  title,\n-  description,\n-  onTopArrowClick,\n-  onBottomArrowClick,\n-}: EventBlockProps) {\n+  downloadText,\n+  onEnterSection,\n+}) => {\n+  const { lang } = useLang();\n+  const [activeTab, setActiveTab] = useState(0);\n+  const currentSlide = slides[activeTab];\n+  const leftRef = useRef<HTMLDivElement>(null);\n+  const rightRef = useRef<HTMLDivElement>(null);\n+  const sectionRef = useRef<HTMLDivElement>(null);\n+  const ignoreScroll = useRef(false);\n+  const activeTabRef = useRef(activeTab);\n   const [isMobile, setIsMobile] = useState(false);\n+  const lastLoggedIndex = useRef<number | null>(null);\n \n+  const slideRefs = useRef<(HTMLDivElement | null)[]>([]);\n+\n   useEffect(() => {\n     const checkMobile = () => {\n       setIsMobile(window.innerWidth < Breakpoints.mobile);\n     };\n@@ -59,41 +245,175 @@\n     window.addEventListener('resize', checkMobile);\n     return () => window.removeEventListener('resize', checkMobile);\n   }, []);\n \n-  const getImageSrc = (src: string) => {\n-    if (!isMobile) return src;\n+  useEffect(() => {\n+    activeTabRef.current = activeTab;\n+  }, [activeTab]);\n \n-    // \"example/image01.jpg\" → \"example/image01_m.jpg\"\n-    const lastDot = src.lastIndexOf('.');\n-    if (lastDot === -1) return src;\n-    return src.slice(0, lastDot) + '_m' + src.slice(lastDot);\n+  useEffect(() => {\n+    if (isMobile || !leftRef.current || !rightRef.current || !sectionRef.current) return;\n+\n+    gsap.registerPlugin(ScrollTrigger);\n+    const slideHeight = window.innerHeight;\n+    const totalScroll = slideHeight * tabs.length;\n+\n+    const lastScrollY = { current: window.scrollY };\n+    const ctx = gsap.context(() => {\n+      ScrollTrigger.create({\n+        id: 'partner-scroll',\n+        trigger: sectionRef.current,\n+        start: 'top top',\n+        end: `+=${totalScroll}`,\n+        scrub: true,\n+        pin: true,\n+        onUpdate: (self) => {\n+          const progress = self.progress;\n+          let index = Math.floor(progress * tabs.length);\n+          index = Math.min(index, tabs.length - 1);\n+\n+          const currentScrollY = window.scrollY;\n+          const isScrollingDown = currentScrollY > lastScrollY.current;\n+          lastScrollY.current = currentScrollY;\n+\n+          if (!ignoreScroll.current) {\n+            if (index !== activeTabRef.current) {\n+              setActiveTab(index);\n+            }\n+\n+            if (\n+              isScrollingDown &&\n+              index !== lastLoggedIndex.current &&\n+              currentScrollY > self.start\n+            ) {\n+              lastLoggedIndex.current = index;\n+              onEnterSection?.(index, tabs[index]);\n+            }\n+          }\n+        },\n+      });\n+    }, sectionRef);\n+\n+    return () => ctx.revert();\n+  }, [isMobile, tabs.length]);\n+\n+  useEffect(() => {\n+    if (!isMobile || !onEnterSection) return;\n+\n+    const observer = new IntersectionObserver(\n+      (entries) => {\n+        entries.forEach((entry) => {\n+          const index = slideRefs.current.findIndex((el) => el === entry.target);\n+          if (entry.isIntersecting && index !== -1 && index !== lastLoggedIndex.current) {\n+            lastLoggedIndex.current = index;\n+            onEnterSection(index, tabs[index]);\n+          }\n+        });\n+      },\n+      { threshold: 0.6 }\n+    );\n+\n+    slideRefs.current.forEach((el) => {\n+      if (el) observer.observe(el);\n+    });\n+    return () => {\n+      slideRefs.current.forEach((el) => {\n+        if (el) observer.unobserve(el);\n+      });\n+    };\n+  }, [isMobile, tabs, onEnterSection]);\n+\n+  const handleTabClick = (index: number) => {\n+    const trigger = ScrollTrigger.getById('partner-scroll');\n+    if (!trigger) return;\n+\n+    ignoreScroll.current = true;\n+    setActiveTab(index);\n+    const scrollY = trigger.start + (trigger.end - trigger.start) * (index / tabs.length);\n+    window.scrollTo({ top: scrollY, behavior: 'smooth' });\n+    logButtonClick('Partner', `탭: ${tabs[index]}`);\n+    setTimeout(() => (ignoreScroll.current = false), 1000);\n   };\n \n+  const getDownloadLink = (index: number) => {\n+    switch (index) {\n+      case 0: return downloadLinks.antiDroneProposal[lang];\n+      case 1: return downloadLinks.luxuryReverseAuctionProposal[lang];\n+      case 2: return downloadLinks.tradeProposal[lang];\n+      case 3: return downloadLinks.tableOrderProposal[lang];\n+      default: return '#';\n+    }\n+  };\n+\n   return (\n-    <Wrapper>\n-      <CustomNavigator\n-        topLabel={topLabel}\n-        centerLabel={centerLabel}\n-        bottomLabel={bottomLabel}\n-        title={title}\n-        description={description}\n-        onTopArrowClick={onTopArrowClick}\n-        onBottomArrowClick={onBottomArrowClick}\n-      />\n+    <ResponsiveView\n+      desktopView={\n+        <Wrapper>\n+          <CustomBlockLayout ref={sectionRef}>\n+            <CustomBlockLayout.Left ref={leftRef}>\n+              <Title>{`${title1}\\n${title2}`}</Title>\n+              <Subtitle>{subtitle}</Subtitle>\n+            </CustomBlockLayout.Left>\n+            <CustomBlockLayout.Right ref={rightRef}>\n+              <Tabs>\n+                {tabs.map((tab, index) => (\n+                  <Tab key={index} $active={activeTab === index} onClick={() => handleTabClick(index)}>\n+                    {tab}\n+                  </Tab>\n+                ))}\n+              </Tabs>\n+              <AnimatedDescription key={activeTab}>\n+                <FlexRow>\n+                  <LeftColumn>\n+                    <TabTitle>{currentSlide.subtitle}</TabTitle>\n+                    <TabDescription dangerouslySetInnerHTML={{ __html: currentSlide.description }} />\n+                  </LeftColumn>\n+                  <RightColumn>\n+                    <DownloadLink\n+                      href={getDownloadLink(activeTab)}\n+                      target=\"_blank\"\n+                      rel=\"noopener noreferrer\"\n+                      onClick={() => logButtonClick('Partner', `다운로드: ${tabs[activeTab]}`)}\n+                    >\n+                      {downloadText}\n+                      <DownloadIcon style={{ fontSize: '16px' }} />\n+                    </DownloadLink>\n+                  </RightColumn>\n+                </FlexRow>\n+                <TabImage src={currentSlide.image} alt={currentSlide.title} />\n+              </AnimatedDescription>\n+            </CustomBlockLayout.Right>\n+          </CustomBlockLayout>\n+        </Wrapper>\n+      }\n+      mobileView={\n+        <MobileContainer>\n+          <Title style={{ whiteSpace: 'pre-line' }}>{`${title1}\\n${title2}`}</Title>\n+          <Subtitle>{subtitle}</Subtitle>\n+          {slides.map((slide, index) => (\n+            <SlideWrapper\n+              key={index}\n+              ref={(el) => {\n+                slideRefs.current[index] = el;\n+              }}\n+            >\n+              <TabTitle>{tabs[index]}</TabTitle>\n+              <TabDescription>{slide.description.replace(/<br\\s*\\/?>/gi, '')}</TabDescription>\n+              <MobileDownloadButton\n+                href={getDownloadLink(index)}\n+                target=\"_blank\"\n+                rel=\"noopener noreferrer\"\n+                onClick={() => logButtonClick('Partner', `다운로드: ${tabs[index]}`)}\n+              >\n+                {downloadText}\n+                <DownloadIcon style={{ fontSize: '16px' }} />\n+              </MobileDownloadButton>\n+              <TabImage src={slide.image} alt={slide.title} />\n+            </SlideWrapper>\n+          ))}\n+        </MobileContainer>\n+      }\n+    />\n+  );\n+};\n \n-      <Content>\n-        {slides.map((slide, i) => (\n-          <ImageBox key={i}>\n-            <Image\n-              src={getImageSrc(slide.image)}\n-              alt=\"\"\n-              width={1200}\n-              height={600}\n-              style={{ objectFit: 'cover' }}\n-            />\n-          </ImageBox>\n-        ))}\n-      </Content>\n-    </Wrapper>\n-  );\n-}\n+export default Partner;\n"
                },
                {
                    "date": 1747802724175,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -347,8 +347,9 @@\n   return (\n     <ResponsiveView\n       desktopView={\n         <Wrapper>\n+           <div id=\"partner\" style={{ height: 1 }} /> \n           <CustomBlockLayout ref={sectionRef}>\n             <CustomBlockLayout.Left ref={leftRef}>\n               <Title>{`${title1}\\n${title2}`}</Title>\n               <Subtitle>{subtitle}</Subtitle>\n"
                },
                {
                    "date": 1747802766805,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,420 @@\n+'use client';\n+\n+import React, { useState, useRef, useEffect } from 'react';\n+import styled from 'styled-components';\n+import { gsap } from 'gsap';\n+import { ScrollTrigger } from 'gsap/ScrollTrigger';\n+import DownloadIcon from '@mui/icons-material/Download';\n+import { useLang } from '@/contexts/LangContext';\n+import { downloadLinks } from '@/lib/i18n/downloadLinks';\n+import { AppColors } from '@/styles/colors';\n+import { AppTextStyles } from '@/styles/textStyles';\n+import CustomBlockLayout from '@/customComponents/CustomBlockLayout';\n+import ResponsiveView from '@/layout/ResponsiveView';\n+import { Breakpoints } from '@/constants/layoutConstants';\n+import { userStamp } from '@/lib/api/user/api';\n+\n+interface PartnerProps {\n+  title1: string;\n+  title2: string;\n+  subtitle: string;\n+  tabs: string[];\n+  slides: {\n+    title: string;\n+    image: string;\n+    subtitle: string;\n+    description: string;\n+  }[];\n+  downloadText: string;\n+  onEnterSection?: (index: number, tab: string) => void;\n+}\n+\n+const Title = styled.h2`\n+  ${AppTextStyles.headline2};\n+  color: ${AppColors.onSurface};\n+  margin-bottom: 0px;\n+  line-height: 1.2;\n+  white-space: pre-line;\n+\n+  @media (max-width: ${Breakpoints.mobile}px) {\n+    font-size: 25px;\n+  }\n+`;\n+\n+const Subtitle = styled.p`\n+  font-size: 16px;\n+  color: #666;\n+  line-height: 1.6;\n+  white-space: pre-line;\n+  margin-bottom: 100px; /* ✅ 모바일 간격 */\n+\n+  @media (max-width: ${Breakpoints.mobile}px) {\n+    font-size: 14px;\n+    white-space: normal;\n+  }\n+`;\n+\n+const Tabs = styled.div`\n+  display: flex;\n+  gap: 24px;\n+  margin-bottom: 10px;\n+  flex-wrap: wrap;\n+`;\n+\n+const Tab = styled.div<{ $active: boolean }>`\n+  font-size: 16px;\n+  font-weight: ${({ $active }) => ($active ? 'bold' : 'normal')};\n+  border-bottom: ${({ $active }) => ($active ? '2px solid #000' : 'none')};\n+  padding-bottom: 4px;\n+  cursor: pointer;\n+  color: ${({ $active }) => ($active ? '#000' : '#888')};\n+`;\n+\n+const Slide = styled.div<{ $isActive: boolean }>`\n+  display: ${({ $isActive }) => ($isActive ? 'block' : 'none')};\n+`;\n+\n+const Wrapper = styled.div`\n+  min-width: ${Breakpoints.desktop}px; \n+  background-color: #fff;\n+\n+  @media (max-width: ${Breakpoints.mobile}px) {\n+    min-width: 100%;\n+  }\n+\n+`;\n+\n+\n+\n+const TabTitle = styled.h3`\n+  font-size: 25px;\n+  font-weight: bold;\n+  margin-bottom: 12px;\n+  position: relative;\n+  padding-left: 16px;\n+  color: #000;\n+\n+  &::before {\n+    content: '';\n+    position: absolute;\n+    left: 0;\n+    top: 50%;\n+    transform: translateY(-50%);\n+    width: 8px;\n+    height: 24px;\n+    background-color: #000000;\n+  }\n+\n+  @media (max-width: ${Breakpoints.mobile}px) {\n+    font-size: 18px;\n+  }\n+`;\n+const TabDescription = styled.p`\n+  font-size: 16px;\n+  color: #666;\n+  line-height: 1.6;\n+  margin-top: 8px;\n+\n+  @media (max-width: ${Breakpoints.mobile}px) {\n+    font-size: 14px;\n+  }\n+`;\n+\n+const TabImage = styled.img`\n+  width: 100%;\n+  height: auto;\n+  margin-top: 16px;\n+  margin-bottom: 16px;\n+  border-radius: 8px;\n+`;\n+\n+const FlexRow = styled.div`\n+  display: flex;\n+  width: 100%;\n+  justify-content: space-between;\n+`;\n+\n+const LeftColumn = styled.div`\n+  flex: 1;\n+  display: flex;\n+  flex-direction: column;\n+`;\n+\n+const RightColumn = styled.div`\n+  flex-shrink: 0;\n+  display: flex;\n+  flex-direction: column;\n+  justify-content: flex-end;\n+  align-items: flex-end;\n+  padding-bottom: 20px;\n+`;\n+\n+const DownloadLink = styled.a`\n+  font-size: 14px;\n+  color: #000000;\n+  cursor: pointer;\n+  display: flex;\n+  align-items: center;\n+  justify-content: flex-end;\n+  gap: 8px;\n+  text-decoration: none;\n+  animation: bounceY 1.5s ease-in-out infinite;\n+\n+  @keyframes bounceY {\n+    0%, 100% { transform: translateY(0px); }\n+    50% { transform: translateY(-10px); }\n+  }\n+`;\n+\n+const MobileDownloadButton = styled.a`\n+  display: inline-flex;\n+  align-items: center;\n+  width: 100%;\n+  justify-content: center;\n+  padding: 10px 16px;\n+  font-size: 14px;\n+  font-weight: 600;\n+  color: #000;\n+  border: 1px solid #ccc;\n+  border-radius: 6px;\n+  text-decoration: none;\n+  gap: 6px;\n+  margin-top: 0px;\n+`;\n+\n+const AnimatedDescription = styled.div`\n+  animation: fade 0.5s ease-in-out;\n+\n+  @keyframes fade {\n+    from { opacity: 0; transform: translateY(20px); }\n+    to { opacity: 1; transform: translateY(0); }\n+  }\n+`;\n+\n+const MobileContainer = styled.div`\n+  padding: 24px 20px;\n+`;\n+\n+const SlideWrapper = styled.div`\n+  margin-bottom: 100px;\n+\n+  &:last-of-type {\n+    margin-bottom: 0;\n+  }\n+`;\n+const logButtonClick = async (content: string, memo: string) => {\n+  try {\n+    await userStamp({\n+      uuid: localStorage.getItem('logId') ?? 'anonymous',\n+      category: '버튼',\n+      content,\n+      memo,\n+    });\n+  } catch (e) {\n+  }\n+};\n+\n+\n+const Partner: React.FC<PartnerProps> = ({\n+  title1,\n+  title2,\n+  subtitle,\n+  tabs,\n+  slides,\n+  downloadText,\n+  onEnterSection,\n+}) => {\n+  const { lang } = useLang();\n+  const [activeTab, setActiveTab] = useState(0);\n+  const currentSlide = slides[activeTab];\n+  const leftRef = useRef<HTMLDivElement>(null);\n+  const rightRef = useRef<HTMLDivElement>(null);\n+  const sectionRef = useRef<HTMLDivElement>(null);\n+  const ignoreScroll = useRef(false);\n+  const activeTabRef = useRef(activeTab);\n+  const [isMobile, setIsMobile] = useState(false);\n+  const lastLoggedIndex = useRef<number | null>(null);\n+\n+  const slideRefs = useRef<(HTMLDivElement | null)[]>([]);\n+\n+  useEffect(() => {\n+    const checkMobile = () => {\n+      setIsMobile(window.innerWidth < Breakpoints.mobile);\n+    };\n+    checkMobile();\n+    window.addEventListener('resize', checkMobile);\n+    return () => window.removeEventListener('resize', checkMobile);\n+  }, []);\n+\n+  useEffect(() => {\n+    activeTabRef.current = activeTab;\n+  }, [activeTab]);\n+\n+  useEffect(() => {\n+    if (isMobile || !leftRef.current || !rightRef.current || !sectionRef.current) return;\n+\n+    gsap.registerPlugin(ScrollTrigger);\n+    const slideHeight = window.innerHeight;\n+    const totalScroll = slideHeight * tabs.length;\n+\n+    const lastScrollY = { current: window.scrollY };\n+    const ctx = gsap.context(() => {\n+      ScrollTrigger.create({\n+        id: 'partner-scroll',\n+        trigger: sectionRef.current,\n+        start: 'top top',\n+        end: `+=${totalScroll}`,\n+        scrub: true,\n+        pin: true,\n+        onUpdate: (self) => {\n+          const progress = self.progress;\n+          let index = Math.floor(progress * tabs.length);\n+          index = Math.min(index, tabs.length - 1);\n+\n+          const currentScrollY = window.scrollY;\n+          const isScrollingDown = currentScrollY > lastScrollY.current;\n+          lastScrollY.current = currentScrollY;\n+\n+          if (!ignoreScroll.current) {\n+            if (index !== activeTabRef.current) {\n+              setActiveTab(index);\n+            }\n+\n+            if (\n+              isScrollingDown &&\n+              index !== lastLoggedIndex.current &&\n+              currentScrollY > self.start\n+            ) {\n+              lastLoggedIndex.current = index;\n+              onEnterSection?.(index, tabs[index]);\n+            }\n+          }\n+        },\n+      });\n+    }, sectionRef);\n+\n+    return () => ctx.revert();\n+  }, [isMobile, tabs.length]);\n+\n+  useEffect(() => {\n+    if (!isMobile || !onEnterSection) return;\n+\n+    const observer = new IntersectionObserver(\n+      (entries) => {\n+        entries.forEach((entry) => {\n+          const index = slideRefs.current.findIndex((el) => el === entry.target);\n+          if (entry.isIntersecting && index !== -1 && index !== lastLoggedIndex.current) {\n+            lastLoggedIndex.current = index;\n+            onEnterSection(index, tabs[index]);\n+          }\n+        });\n+      },\n+      { threshold: 0.6 }\n+    );\n+\n+    slideRefs.current.forEach((el) => {\n+      if (el) observer.observe(el);\n+    });\n+    return () => {\n+      slideRefs.current.forEach((el) => {\n+        if (el) observer.unobserve(el);\n+      });\n+    };\n+  }, [isMobile, tabs, onEnterSection]);\n+\n+  const handleTabClick = (index: number) => {\n+    const trigger = ScrollTrigger.getById('partner-scroll');\n+    if (!trigger) return;\n+\n+    ignoreScroll.current = true;\n+    setActiveTab(index);\n+    const scrollY = trigger.start + (trigger.end - trigger.start) * (index / tabs.length);\n+    window.scrollTo({ top: scrollY, behavior: 'smooth' });\n+    logButtonClick('Partner', `탭: ${tabs[index]}`);\n+    setTimeout(() => (ignoreScroll.current = false), 1000);\n+  };\n+\n+  const getDownloadLink = (index: number) => {\n+    switch (index) {\n+      case 0: return downloadLinks.antiDroneProposal[lang];\n+      case 1: return downloadLinks.luxuryReverseAuctionProposal[lang];\n+      case 2: return downloadLinks.tradeProposal[lang];\n+      case 3: return downloadLinks.tableOrderProposal[lang];\n+      default: return '#';\n+    }\n+  };\n+\n+  return (\n+    <ResponsiveView\n+      desktopView={\n+        <Wrapper>\n+           <div id=\"partner\" style={{ height: 1 }} /> \n+          <CustomBlockLayout ref={sectionRef}>\n+            <CustomBlockLayout.Left ref={leftRef}>\n+              <Title>{`${title1}\\n${title2}`}</Title>\n+              <Subtitle>{subtitle}</Subtitle>\n+            </CustomBlockLayout.Left>\n+            <CustomBlockLayout.Right ref={rightRef}>\n+              <Tabs>\n+                {tabs.map((tab, index) => (\n+                  <Tab key={index} $active={activeTab === index} onClick={() => handleTabClick(index)}>\n+                    {tab}\n+                  </Tab>\n+                ))}\n+              </Tabs>\n+              <AnimatedDescription key={activeTab}>\n+                <FlexRow>\n+                  <LeftColumn>\n+                    <TabTitle>{currentSlide.subtitle}</TabTitle>\n+                    <TabDescription dangerouslySetInnerHTML={{ __html: currentSlide.description }} />\n+                  </LeftColumn>\n+                  <RightColumn>\n+                    <DownloadLink\n+                      href={getDownloadLink(activeTab)}\n+                      target=\"_blank\"\n+                      rel=\"noopener noreferrer\"\n+                      onClick={() => logButtonClick('Partner', `다운로드: ${tabs[activeTab]}`)}\n+                    >\n+                      {downloadText}\n+                      <DownloadIcon style={{ fontSize: '16px' }} />\n+                    </DownloadLink>\n+                  </RightColumn>\n+                </FlexRow>\n+                <TabImage src={currentSlide.image} alt={currentSlide.title} />\n+              </AnimatedDescription>\n+            </CustomBlockLayout.Right>\n+          </CustomBlockLayout>\n+        </Wrapper>\n+      }\n+      mobileView={\n+        <MobileContainer>\n+          <Title style={{ whiteSpace: 'pre-line' }}>{`${title1}\\n${title2}`}</Title>\n+          <Subtitle>{subtitle}</Subtitle>\n+          {slides.map((slide, index) => (\n+            <SlideWrapper\n+              key={index}\n+              ref={(el) => {\n+                slideRefs.current[index] = el;\n+              }}\n+            >\n+              <TabTitle>{tabs[index]}</TabTitle>\n+              <TabDescription>{slide.description.replace(/<br\\s*\\/?>/gi, '')}</TabDescription>\n+              <MobileDownloadButton\n+                href={getDownloadLink(index)}\n+                target=\"_blank\"\n+                rel=\"noopener noreferrer\"\n+                onClick={() => logButtonClick('Partner', `다운로드: ${tabs[index]}`)}\n+              >\n+                {downloadText}\n+                <DownloadIcon style={{ fontSize: '16px' }} />\n+              </MobileDownloadButton>\n+              <TabImage src={slide.image} alt={slide.title} />\n+            </SlideWrapper>\n+          ))}\n+        </MobileContainer>\n+      }\n+    />\n+  );\n+};\n+\n+export default Partner;\n"
                },
                {
                    "date": 1747802789059,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -387,8 +387,9 @@\n         </Wrapper>\n       }\n       mobileView={\n         <MobileContainer>\n+                    <div id=\"partner\" style={{ height: 1 }} /> \n           <Title style={{ whiteSpace: 'pre-line' }}>{`${title1}\\n${title2}`}</Title>\n           <Subtitle>{subtitle}</Subtitle>\n           {slides.map((slide, index) => (\n             <SlideWrapper\n@@ -417,424 +418,4 @@\n   );\n };\n \n export default Partner;\n-'use client';\n-\n-import React, { useState, useRef, useEffect } from 'react';\n-import styled from 'styled-components';\n-import { gsap } from 'gsap';\n-import { ScrollTrigger } from 'gsap/ScrollTrigger';\n-import DownloadIcon from '@mui/icons-material/Download';\n-import { useLang } from '@/contexts/LangContext';\n-import { downloadLinks } from '@/lib/i18n/downloadLinks';\n-import { AppColors } from '@/styles/colors';\n-import { AppTextStyles } from '@/styles/textStyles';\n-import CustomBlockLayout from '@/customComponents/CustomBlockLayout';\n-import ResponsiveView from '@/layout/ResponsiveView';\n-import { Breakpoints } from '@/constants/layoutConstants';\n-import { userStamp } from '@/lib/api/user/api';\n-\n-interface PartnerProps {\n-  title1: string;\n-  title2: string;\n-  subtitle: string;\n-  tabs: string[];\n-  slides: {\n-    title: string;\n-    image: string;\n-    subtitle: string;\n-    description: string;\n-  }[];\n-  downloadText: string;\n-  onEnterSection?: (index: number, tab: string) => void;\n-}\n-\n-const Title = styled.h2`\n-  ${AppTextStyles.headline2};\n-  color: ${AppColors.onSurface};\n-  margin-bottom: 0px;\n-  line-height: 1.2;\n-  white-space: pre-line;\n-\n-  @media (max-width: ${Breakpoints.mobile}px) {\n-    font-size: 25px;\n-  }\n-`;\n-\n-const Subtitle = styled.p`\n-  font-size: 16px;\n-  color: #666;\n-  line-height: 1.6;\n-  white-space: pre-line;\n-  margin-bottom: 100px; /* ✅ 모바일 간격 */\n-\n-  @media (max-width: ${Breakpoints.mobile}px) {\n-    font-size: 14px;\n-    white-space: normal;\n-  }\n-`;\n-\n-const Tabs = styled.div`\n-  display: flex;\n-  gap: 24px;\n-  margin-bottom: 10px;\n-  flex-wrap: wrap;\n-`;\n-\n-const Tab = styled.div<{ $active: boolean }>`\n-  font-size: 16px;\n-  font-weight: ${({ $active }) => ($active ? 'bold' : 'normal')};\n-  border-bottom: ${({ $active }) => ($active ? '2px solid #000' : 'none')};\n-  padding-bottom: 4px;\n-  cursor: pointer;\n-  color: ${({ $active }) => ($active ? '#000' : '#888')};\n-`;\n-\n-const Slide = styled.div<{ $isActive: boolean }>`\n-  display: ${({ $isActive }) => ($isActive ? 'block' : 'none')};\n-`;\n-\n-const Wrapper = styled.div`\n-  min-width: ${Breakpoints.desktop}px; \n-  background-color: #fff;\n-\n-  @media (max-width: ${Breakpoints.mobile}px) {\n-    min-width: 100%;\n-  }\n-\n-`;\n-\n-\n-\n-const TabTitle = styled.h3`\n-  font-size: 25px;\n-  font-weight: bold;\n-  margin-bottom: 12px;\n-  position: relative;\n-  padding-left: 16px;\n-  color: #000;\n-\n-  &::before {\n-    content: '';\n-    position: absolute;\n-    left: 0;\n-    top: 50%;\n-    transform: translateY(-50%);\n-    width: 8px;\n-    height: 24px;\n-    background-color: #000000;\n-  }\n-\n-  @media (max-width: ${Breakpoints.mobile}px) {\n-    font-size: 18px;\n-  }\n-`;\n-const TabDescription = styled.p`\n-  font-size: 16px;\n-  color: #666;\n-  line-height: 1.6;\n-  margin-top: 8px;\n-\n-  @media (max-width: ${Breakpoints.mobile}px) {\n-    font-size: 14px;\n-  }\n-`;\n-\n-const TabImage = styled.img`\n-  width: 100%;\n-  height: auto;\n-  margin-top: 16px;\n-  margin-bottom: 16px;\n-  border-radius: 8px;\n-`;\n-\n-const FlexRow = styled.div`\n-  display: flex;\n-  width: 100%;\n-  justify-content: space-between;\n-`;\n-\n-const LeftColumn = styled.div`\n-  flex: 1;\n-  display: flex;\n-  flex-direction: column;\n-`;\n-\n-const RightColumn = styled.div`\n-  flex-shrink: 0;\n-  display: flex;\n-  flex-direction: column;\n-  justify-content: flex-end;\n-  align-items: flex-end;\n-  padding-bottom: 20px;\n-`;\n-\n-const DownloadLink = styled.a`\n-  font-size: 14px;\n-  color: #000000;\n-  cursor: pointer;\n-  display: flex;\n-  align-items: center;\n-  justify-content: flex-end;\n-  gap: 8px;\n-  text-decoration: none;\n-  animation: bounceY 1.5s ease-in-out infinite;\n-\n-  @keyframes bounceY {\n-    0%, 100% { transform: translateY(0px); }\n-    50% { transform: translateY(-10px); }\n-  }\n-`;\n-\n-const MobileDownloadButton = styled.a`\n-  display: inline-flex;\n-  align-items: center;\n-  width: 100%;\n-  justify-content: center;\n-  padding: 10px 16px;\n-  font-size: 14px;\n-  font-weight: 600;\n-  color: #000;\n-  border: 1px solid #ccc;\n-  border-radius: 6px;\n-  text-decoration: none;\n-  gap: 6px;\n-  margin-top: 0px;\n-`;\n-\n-const AnimatedDescription = styled.div`\n-  animation: fade 0.5s ease-in-out;\n-\n-  @keyframes fade {\n-    from { opacity: 0; transform: translateY(20px); }\n-    to { opacity: 1; transform: translateY(0); }\n-  }\n-`;\n-\n-const MobileContainer = styled.div`\n-  padding: 24px 20px;\n-`;\n-\n-const SlideWrapper = styled.div`\n-  margin-bottom: 100px;\n-\n-  &:last-of-type {\n-    margin-bottom: 0;\n-  }\n-`;\n-const logButtonClick = async (content: string, memo: string) => {\n-  try {\n-    await userStamp({\n-      uuid: localStorage.getItem('logId') ?? 'anonymous',\n-      category: '버튼',\n-      content,\n-      memo,\n-    });\n-  } catch (e) {\n-  }\n-};\n-\n-\n-const Partner: React.FC<PartnerProps> = ({\n-  title1,\n-  title2,\n-  subtitle,\n-  tabs,\n-  slides,\n-  downloadText,\n-  onEnterSection,\n-}) => {\n-  const { lang } = useLang();\n-  const [activeTab, setActiveTab] = useState(0);\n-  const currentSlide = slides[activeTab];\n-  const leftRef = useRef<HTMLDivElement>(null);\n-  const rightRef = useRef<HTMLDivElement>(null);\n-  const sectionRef = useRef<HTMLDivElement>(null);\n-  const ignoreScroll = useRef(false);\n-  const activeTabRef = useRef(activeTab);\n-  const [isMobile, setIsMobile] = useState(false);\n-  const lastLoggedIndex = useRef<number | null>(null);\n-\n-  const slideRefs = useRef<(HTMLDivElement | null)[]>([]);\n-\n-  useEffect(() => {\n-    const checkMobile = () => {\n-      setIsMobile(window.innerWidth < Breakpoints.mobile);\n-    };\n-    checkMobile();\n-    window.addEventListener('resize', checkMobile);\n-    return () => window.removeEventListener('resize', checkMobile);\n-  }, []);\n-\n-  useEffect(() => {\n-    activeTabRef.current = activeTab;\n-  }, [activeTab]);\n-\n-  useEffect(() => {\n-    if (isMobile || !leftRef.current || !rightRef.current || !sectionRef.current) return;\n-\n-    gsap.registerPlugin(ScrollTrigger);\n-    const slideHeight = window.innerHeight;\n-    const totalScroll = slideHeight * tabs.length;\n-\n-    const lastScrollY = { current: window.scrollY };\n-    const ctx = gsap.context(() => {\n-      ScrollTrigger.create({\n-        id: 'partner-scroll',\n-        trigger: sectionRef.current,\n-        start: 'top top',\n-        end: `+=${totalScroll}`,\n-        scrub: true,\n-        pin: true,\n-        onUpdate: (self) => {\n-          const progress = self.progress;\n-          let index = Math.floor(progress * tabs.length);\n-          index = Math.min(index, tabs.length - 1);\n-\n-          const currentScrollY = window.scrollY;\n-          const isScrollingDown = currentScrollY > lastScrollY.current;\n-          lastScrollY.current = currentScrollY;\n-\n-          if (!ignoreScroll.current) {\n-            if (index !== activeTabRef.current) {\n-              setActiveTab(index);\n-            }\n-\n-            if (\n-              isScrollingDown &&\n-              index !== lastLoggedIndex.current &&\n-              currentScrollY > self.start\n-            ) {\n-              lastLoggedIndex.current = index;\n-              onEnterSection?.(index, tabs[index]);\n-            }\n-          }\n-        },\n-      });\n-    }, sectionRef);\n-\n-    return () => ctx.revert();\n-  }, [isMobile, tabs.length]);\n-\n-  useEffect(() => {\n-    if (!isMobile || !onEnterSection) return;\n-\n-    const observer = new IntersectionObserver(\n-      (entries) => {\n-        entries.forEach((entry) => {\n-          const index = slideRefs.current.findIndex((el) => el === entry.target);\n-          if (entry.isIntersecting && index !== -1 && index !== lastLoggedIndex.current) {\n-            lastLoggedIndex.current = index;\n-            onEnterSection(index, tabs[index]);\n-          }\n-        });\n-      },\n-      { threshold: 0.6 }\n-    );\n-\n-    slideRefs.current.forEach((el) => {\n-      if (el) observer.observe(el);\n-    });\n-    return () => {\n-      slideRefs.current.forEach((el) => {\n-        if (el) observer.unobserve(el);\n-      });\n-    };\n-  }, [isMobile, tabs, onEnterSection]);\n-\n-  const handleTabClick = (index: number) => {\n-    const trigger = ScrollTrigger.getById('partner-scroll');\n-    if (!trigger) return;\n-\n-    ignoreScroll.current = true;\n-    setActiveTab(index);\n-    const scrollY = trigger.start + (trigger.end - trigger.start) * (index / tabs.length);\n-    window.scrollTo({ top: scrollY, behavior: 'smooth' });\n-    logButtonClick('Partner', `탭: ${tabs[index]}`);\n-    setTimeout(() => (ignoreScroll.current = false), 1000);\n-  };\n-\n-  const getDownloadLink = (index: number) => {\n-    switch (index) {\n-      case 0: return downloadLinks.antiDroneProposal[lang];\n-      case 1: return downloadLinks.luxuryReverseAuctionProposal[lang];\n-      case 2: return downloadLinks.tradeProposal[lang];\n-      case 3: return downloadLinks.tableOrderProposal[lang];\n-      default: return '#';\n-    }\n-  };\n-\n-  return (\n-    <ResponsiveView\n-      desktopView={\n-        <Wrapper>\n-           <div id=\"partner\" style={{ height: 1 }} /> \n-          <CustomBlockLayout ref={sectionRef}>\n-            <CustomBlockLayout.Left ref={leftRef}>\n-              <Title>{`${title1}\\n${title2}`}</Title>\n-              <Subtitle>{subtitle}</Subtitle>\n-            </CustomBlockLayout.Left>\n-            <CustomBlockLayout.Right ref={rightRef}>\n-              <Tabs>\n-                {tabs.map((tab, index) => (\n-                  <Tab key={index} $active={activeTab === index} onClick={() => handleTabClick(index)}>\n-                    {tab}\n-                  </Tab>\n-                ))}\n-              </Tabs>\n-              <AnimatedDescription key={activeTab}>\n-                <FlexRow>\n-                  <LeftColumn>\n-                    <TabTitle>{currentSlide.subtitle}</TabTitle>\n-                    <TabDescription dangerouslySetInnerHTML={{ __html: currentSlide.description }} />\n-                  </LeftColumn>\n-                  <RightColumn>\n-                    <DownloadLink\n-                      href={getDownloadLink(activeTab)}\n-                      target=\"_blank\"\n-                      rel=\"noopener noreferrer\"\n-                      onClick={() => logButtonClick('Partner', `다운로드: ${tabs[activeTab]}`)}\n-                    >\n-                      {downloadText}\n-                      <DownloadIcon style={{ fontSize: '16px' }} />\n-                    </DownloadLink>\n-                  </RightColumn>\n-                </FlexRow>\n-                <TabImage src={currentSlide.image} alt={currentSlide.title} />\n-              </AnimatedDescription>\n-            </CustomBlockLayout.Right>\n-          </CustomBlockLayout>\n-        </Wrapper>\n-      }\n-      mobileView={\n-        <MobileContainer>\n-          <Title style={{ whiteSpace: 'pre-line' }}>{`${title1}\\n${title2}`}</Title>\n-          <Subtitle>{subtitle}</Subtitle>\n-          {slides.map((slide, index) => (\n-            <SlideWrapper\n-              key={index}\n-              ref={(el) => {\n-                slideRefs.current[index] = el;\n-              }}\n-            >\n-              <TabTitle>{tabs[index]}</TabTitle>\n-              <TabDescription>{slide.description.replace(/<br\\s*\\/?>/gi, '')}</TabDescription>\n-              <MobileDownloadButton\n-                href={getDownloadLink(index)}\n-                target=\"_blank\"\n-                rel=\"noopener noreferrer\"\n-                onClick={() => logButtonClick('Partner', `다운로드: ${tabs[index]}`)}\n-              >\n-                {downloadText}\n-                <DownloadIcon style={{ fontSize: '16px' }} />\n-              </MobileDownloadButton>\n-              <TabImage src={slide.image} alt={slide.title} />\n-            </SlideWrapper>\n-          ))}\n-        </MobileContainer>\n-      }\n-    />\n-  );\n-};\n-\n-export default Partner;\n"
                },
                {
                    "date": 1747802804832,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -387,9 +387,8 @@\n         </Wrapper>\n       }\n       mobileView={\n         <MobileContainer>\n-                    <div id=\"partner\" style={{ height: 1 }} /> \n           <Title style={{ whiteSpace: 'pre-line' }}>{`${title1}\\n${title2}`}</Title>\n           <Subtitle>{subtitle}</Subtitle>\n           {slides.map((slide, index) => (\n             <SlideWrapper\n"
                },
                {
                    "date": 1747803611740,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,19 +1,19 @@\n 'use client';\n \n-import React, { useState, useRef, useEffect } from 'react';\n+import React, { useEffect, useRef, useState } from 'react';\n import styled from 'styled-components';\n import { gsap } from 'gsap';\n import { ScrollTrigger } from 'gsap/ScrollTrigger';\n+import ResponsiveView from '@/layout/ResponsiveView';\n+import CustomBlockLayout from '@/customComponents/CustomBlockLayout';\n+import { Breakpoints } from '@/constants/layoutConstants';\n+import { AppColors } from '@/styles/colors';\n+import { AppTextStyles } from '@/styles/textStyles';\n+import { userStamp } from '@/lib/api/user/api';\n import DownloadIcon from '@mui/icons-material/Download';\n import { useLang } from '@/contexts/LangContext';\n import { downloadLinks } from '@/lib/i18n/downloadLinks';\n-import { AppColors } from '@/styles/colors';\n-import { AppTextStyles } from '@/styles/textStyles';\n-import CustomBlockLayout from '@/customComponents/CustomBlockLayout';\n-import ResponsiveView from '@/layout/ResponsiveView';\n-import { Breakpoints } from '@/constants/layoutConstants';\n-import { userStamp } from '@/lib/api/user/api';\n \n interface PartnerProps {\n   title1: string;\n   title2: string;\n@@ -26,10 +26,22 @@\n     description: string;\n   }[];\n   downloadText: string;\n   onEnterSection?: (index: number, tab: string) => void;\n+  sectionRef?: React.RefObject<HTMLDivElement>; // ✅ 추가\n }\n \n+gsap.registerPlugin(ScrollTrigger);\n+\n+const Wrapper = styled.div`\n+  min-width: ${Breakpoints.desktop}px;\n+  background-color: #fff;\n+\n+  @media (max-width: ${Breakpoints.mobile}px) {\n+    min-width: 100%;\n+  }\n+`;\n+\n const Title = styled.h2`\n   ${AppTextStyles.headline2};\n   color: ${AppColors.onSurface};\n   margin-bottom: 0px;\n@@ -44,14 +56,12 @@\n const Subtitle = styled.p`\n   font-size: 16px;\n   color: #666;\n   line-height: 1.6;\n-  white-space: pre-line;\n-  margin-bottom: 100px; /* ✅ 모바일 간격 */\n+  margin-bottom: 100px;\n \n   @media (max-width: ${Breakpoints.mobile}px) {\n     font-size: 14px;\n-    white-space: normal;\n   }\n `;\n \n const Tabs = styled.div`\n@@ -69,24 +79,8 @@\n   cursor: pointer;\n   color: ${({ $active }) => ($active ? '#000' : '#888')};\n `;\n \n-const Slide = styled.div<{ $isActive: boolean }>`\n-  display: ${({ $isActive }) => ($isActive ? 'block' : 'none')};\n-`;\n-\n-const Wrapper = styled.div`\n-  min-width: ${Breakpoints.desktop}px; \n-  background-color: #fff;\n-\n-  @media (max-width: ${Breakpoints.mobile}px) {\n-    min-width: 100%;\n-  }\n-\n-`;\n-\n-\n-\n const TabTitle = styled.h3`\n   font-size: 25px;\n   font-weight: bold;\n   margin-bottom: 12px;\n@@ -108,8 +102,9 @@\n   @media (max-width: ${Breakpoints.mobile}px) {\n     font-size: 18px;\n   }\n `;\n+\n const TabDescription = styled.p`\n   font-size: 16px;\n   color: #666;\n   line-height: 1.6;\n@@ -127,46 +122,8 @@\n   margin-bottom: 16px;\n   border-radius: 8px;\n `;\n \n-const FlexRow = styled.div`\n-  display: flex;\n-  width: 100%;\n-  justify-content: space-between;\n-`;\n-\n-const LeftColumn = styled.div`\n-  flex: 1;\n-  display: flex;\n-  flex-direction: column;\n-`;\n-\n-const RightColumn = styled.div`\n-  flex-shrink: 0;\n-  display: flex;\n-  flex-direction: column;\n-  justify-content: flex-end;\n-  align-items: flex-end;\n-  padding-bottom: 20px;\n-`;\n-\n-const DownloadLink = styled.a`\n-  font-size: 14px;\n-  color: #000000;\n-  cursor: pointer;\n-  display: flex;\n-  align-items: center;\n-  justify-content: flex-end;\n-  gap: 8px;\n-  text-decoration: none;\n-  animation: bounceY 1.5s ease-in-out infinite;\n-\n-  @keyframes bounceY {\n-    0%, 100% { transform: translateY(0px); }\n-    50% { transform: translateY(-10px); }\n-  }\n-`;\n-\n const MobileDownloadButton = styled.a`\n   display: inline-flex;\n   align-items: center;\n   width: 100%;\n@@ -181,67 +138,28 @@\n   gap: 6px;\n   margin-top: 0px;\n `;\n \n-const AnimatedDescription = styled.div`\n-  animation: fade 0.5s ease-in-out;\n-\n-  @keyframes fade {\n-    from { opacity: 0; transform: translateY(20px); }\n-    to { opacity: 1; transform: translateY(0); }\n-  }\n-`;\n-\n-const MobileContainer = styled.div`\n-  padding: 24px 20px;\n-`;\n-\n-const SlideWrapper = styled.div`\n-  margin-bottom: 100px;\n-\n-  &:last-of-type {\n-    margin-bottom: 0;\n-  }\n-`;\n-const logButtonClick = async (content: string, memo: string) => {\n-  try {\n-    await userStamp({\n-      uuid: localStorage.getItem('logId') ?? 'anonymous',\n-      category: '버튼',\n-      content,\n-      memo,\n-    });\n-  } catch (e) {\n-  }\n-};\n-\n-\n const Partner: React.FC<PartnerProps> = ({\n   title1,\n   title2,\n   subtitle,\n   tabs,\n   slides,\n   downloadText,\n   onEnterSection,\n+  sectionRef,\n }) => {\n   const { lang } = useLang();\n   const [activeTab, setActiveTab] = useState(0);\n-  const currentSlide = slides[activeTab];\n-  const leftRef = useRef<HTMLDivElement>(null);\n-  const rightRef = useRef<HTMLDivElement>(null);\n-  const sectionRef = useRef<HTMLDivElement>(null);\n+  const activeTabRef = useRef(activeTab);\n   const ignoreScroll = useRef(false);\n-  const activeTabRef = useRef(activeTab);\n+  const lastLoggedIndex = useRef<number | null>(null);\n   const [isMobile, setIsMobile] = useState(false);\n-  const lastLoggedIndex = useRef<number | null>(null);\n-\n   const slideRefs = useRef<(HTMLDivElement | null)[]>([]);\n \n   useEffect(() => {\n-    const checkMobile = () => {\n-      setIsMobile(window.innerWidth < Breakpoints.mobile);\n-    };\n+    const checkMobile = () => setIsMobile(window.innerWidth < Breakpoints.mobile);\n     checkMobile();\n     window.addEventListener('resize', checkMobile);\n     return () => window.removeEventListener('resize', checkMobile);\n   }, []);\n@@ -249,20 +167,19 @@\n   useEffect(() => {\n     activeTabRef.current = activeTab;\n   }, [activeTab]);\n \n+  // ✅ GSAP pin 적용\n   useEffect(() => {\n-    if (isMobile || !leftRef.current || !rightRef.current || !sectionRef.current) return;\n+    if (isMobile || !sectionRef?.current) return;\n \n-    gsap.registerPlugin(ScrollTrigger);\n-    const slideHeight = window.innerHeight;\n-    const totalScroll = slideHeight * tabs.length;\n+    const totalScroll = window.innerHeight * tabs.length;\n+    const lastScrollY = { current: window.scrollY };\n \n-    const lastScrollY = { current: window.scrollY };\n     const ctx = gsap.context(() => {\n       ScrollTrigger.create({\n         id: 'partner-scroll',\n-        trigger: sectionRef.current,\n+        trigger: sectionRef.current, // ✅ 외부 section을 pin 대상으로\n         start: 'top top',\n         end: `+=${totalScroll}`,\n         scrub: true,\n         pin: true,\n@@ -293,126 +210,88 @@\n       });\n     }, sectionRef);\n \n     return () => ctx.revert();\n-  }, [isMobile, tabs.length]);\n+  }, [isMobile, tabs.length, sectionRef]);\n \n-  useEffect(() => {\n-    if (!isMobile || !onEnterSection) return;\n+  const getDownloadLink = (index: number) => {\n+    switch (index) {\n+      case 0: return downloadLinks.antiDroneProposal[lang];\n+      case 1: return downloadLinks.luxuryReverseAuctionProposal[lang];\n+      case 2: return downloadLinks.tradeProposal[lang];\n+      case 3: return downloadLinks.tableOrderProposal[lang];\n+      default: return '#';\n+    }\n+  };\n \n-    const observer = new IntersectionObserver(\n-      (entries) => {\n-        entries.forEach((entry) => {\n-          const index = slideRefs.current.findIndex((el) => el === entry.target);\n-          if (entry.isIntersecting && index !== -1 && index !== lastLoggedIndex.current) {\n-            lastLoggedIndex.current = index;\n-            onEnterSection(index, tabs[index]);\n-          }\n-        });\n-      },\n-      { threshold: 0.6 }\n-    );\n-\n-    slideRefs.current.forEach((el) => {\n-      if (el) observer.observe(el);\n-    });\n-    return () => {\n-      slideRefs.current.forEach((el) => {\n-        if (el) observer.unobserve(el);\n-      });\n-    };\n-  }, [isMobile, tabs, onEnterSection]);\n-\n   const handleTabClick = (index: number) => {\n     const trigger = ScrollTrigger.getById('partner-scroll');\n     if (!trigger) return;\n \n     ignoreScroll.current = true;\n     setActiveTab(index);\n     const scrollY = trigger.start + (trigger.end - trigger.start) * (index / tabs.length);\n     window.scrollTo({ top: scrollY, behavior: 'smooth' });\n-    logButtonClick('Partner', `탭: ${tabs[index]}`);\n     setTimeout(() => (ignoreScroll.current = false), 1000);\n   };\n \n-  const getDownloadLink = (index: number) => {\n-    switch (index) {\n-      case 0: return downloadLinks.antiDroneProposal[lang];\n-      case 1: return downloadLinks.luxuryReverseAuctionProposal[lang];\n-      case 2: return downloadLinks.tradeProposal[lang];\n-      case 3: return downloadLinks.tableOrderProposal[lang];\n-      default: return '#';\n-    }\n-  };\n-\n   return (\n     <ResponsiveView\n       desktopView={\n         <Wrapper>\n-           <div id=\"partner\" style={{ height: 1 }} /> \n-          <CustomBlockLayout ref={sectionRef}>\n-            <CustomBlockLayout.Left ref={leftRef}>\n+          <CustomBlockLayout>\n+            <CustomBlockLayout.Left>\n               <Title>{`${title1}\\n${title2}`}</Title>\n               <Subtitle>{subtitle}</Subtitle>\n             </CustomBlockLayout.Left>\n-            <CustomBlockLayout.Right ref={rightRef}>\n+            <CustomBlockLayout.Right>\n               <Tabs>\n                 {tabs.map((tab, index) => (\n                   <Tab key={index} $active={activeTab === index} onClick={() => handleTabClick(index)}>\n                     {tab}\n                   </Tab>\n                 ))}\n               </Tabs>\n-              <AnimatedDescription key={activeTab}>\n-                <FlexRow>\n-                  <LeftColumn>\n-                    <TabTitle>{currentSlide.subtitle}</TabTitle>\n-                    <TabDescription dangerouslySetInnerHTML={{ __html: currentSlide.description }} />\n-                  </LeftColumn>\n-                  <RightColumn>\n-                    <DownloadLink\n-                      href={getDownloadLink(activeTab)}\n-                      target=\"_blank\"\n-                      rel=\"noopener noreferrer\"\n-                      onClick={() => logButtonClick('Partner', `다운로드: ${tabs[activeTab]}`)}\n-                    >\n-                      {downloadText}\n-                      <DownloadIcon style={{ fontSize: '16px' }} />\n-                    </DownloadLink>\n-                  </RightColumn>\n-                </FlexRow>\n-                <TabImage src={currentSlide.image} alt={currentSlide.title} />\n-              </AnimatedDescription>\n+              <div>\n+                <TabTitle>{slides[activeTab].subtitle}</TabTitle>\n+                <TabDescription dangerouslySetInnerHTML={{ __html: slides[activeTab].description }} />\n+                <a\n+                  href={getDownloadLink(activeTab)}\n+                  target=\"_blank\"\n+                  rel=\"noopener noreferrer\"\n+                >\n+                  {downloadText}\n+                  <DownloadIcon style={{ fontSize: '16px' }} />\n+                </a>\n+                <TabImage src={slides[activeTab].image} alt={slides[activeTab].title} />\n+              </div>\n             </CustomBlockLayout.Right>\n           </CustomBlockLayout>\n         </Wrapper>\n       }\n       mobileView={\n-        <MobileContainer>\n-          <Title style={{ whiteSpace: 'pre-line' }}>{`${title1}\\n${title2}`}</Title>\n+        <div style={{ padding: '24px 20px' }}>\n+          <Title>{`${title1}\\n${title2}`}</Title>\n           <Subtitle>{subtitle}</Subtitle>\n           {slides.map((slide, index) => (\n-            <SlideWrapper\n-              key={index}\n-              ref={(el) => {\n-                slideRefs.current[index] = el;\n-              }}\n+            <div key={index} ref={(el) => {\n+              slideRefs.current[index] = el;\n+            }}\n             >\n               <TabTitle>{tabs[index]}</TabTitle>\n               <TabDescription>{slide.description.replace(/<br\\s*\\/?>/gi, '')}</TabDescription>\n               <MobileDownloadButton\n                 href={getDownloadLink(index)}\n                 target=\"_blank\"\n                 rel=\"noopener noreferrer\"\n-                onClick={() => logButtonClick('Partner', `다운로드: ${tabs[index]}`)}\n               >\n                 {downloadText}\n                 <DownloadIcon style={{ fontSize: '16px' }} />\n               </MobileDownloadButton>\n               <TabImage src={slide.image} alt={slide.title} />\n-            </SlideWrapper>\n+            </div>\n           ))}\n-        </MobileContainer>\n+        </div>\n       }\n     />\n   );\n };\n"
                },
                {
                    "date": 1747803718438,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,19 +1,19 @@\n 'use client';\n \n-import React, { useEffect, useRef, useState } from 'react';\n+import React, { useState, useRef, useEffect } from 'react';\n import styled from 'styled-components';\n import { gsap } from 'gsap';\n import { ScrollTrigger } from 'gsap/ScrollTrigger';\n+import DownloadIcon from '@mui/icons-material/Download';\n+import { useLang } from '@/contexts/LangContext';\n+import { downloadLinks } from '@/lib/i18n/downloadLinks';\n+import { AppColors } from '@/styles/colors';\n+import { AppTextStyles } from '@/styles/textStyles';\n+import CustomBlockLayout from '@/customComponents/CustomBlockLayout';\n import ResponsiveView from '@/layout/ResponsiveView';\n-import CustomBlockLayout from '@/customComponents/CustomBlockLayout';\n import { Breakpoints } from '@/constants/layoutConstants';\n-import { AppColors } from '@/styles/colors';\n-import { AppTextStyles } from '@/styles/textStyles';\n import { userStamp } from '@/lib/api/user/api';\n-import DownloadIcon from '@mui/icons-material/Download';\n-import { useLang } from '@/contexts/LangContext';\n-import { downloadLinks } from '@/lib/i18n/downloadLinks';\n \n interface PartnerProps {\n   title1: string;\n   title2: string;\n@@ -26,22 +26,10 @@\n     description: string;\n   }[];\n   downloadText: string;\n   onEnterSection?: (index: number, tab: string) => void;\n-  sectionRef?: React.RefObject<HTMLDivElement>; // ✅ 추가\n }\n \n-gsap.registerPlugin(ScrollTrigger);\n-\n-const Wrapper = styled.div`\n-  min-width: ${Breakpoints.desktop}px;\n-  background-color: #fff;\n-\n-  @media (max-width: ${Breakpoints.mobile}px) {\n-    min-width: 100%;\n-  }\n-`;\n-\n const Title = styled.h2`\n   ${AppTextStyles.headline2};\n   color: ${AppColors.onSurface};\n   margin-bottom: 0px;\n@@ -56,12 +44,14 @@\n const Subtitle = styled.p`\n   font-size: 16px;\n   color: #666;\n   line-height: 1.6;\n-  margin-bottom: 100px;\n+  white-space: pre-line;\n+  margin-bottom: 100px; /* ✅ 모바일 간격 */\n \n   @media (max-width: ${Breakpoints.mobile}px) {\n     font-size: 14px;\n+    white-space: normal;\n   }\n `;\n \n const Tabs = styled.div`\n@@ -79,8 +69,24 @@\n   cursor: pointer;\n   color: ${({ $active }) => ($active ? '#000' : '#888')};\n `;\n \n+const Slide = styled.div<{ $isActive: boolean }>`\n+  display: ${({ $isActive }) => ($isActive ? 'block' : 'none')};\n+`;\n+\n+const Wrapper = styled.div`\n+  min-width: ${Breakpoints.desktop}px; \n+  background-color: #fff;\n+\n+  @media (max-width: ${Breakpoints.mobile}px) {\n+    min-width: 100%;\n+  }\n+\n+`;\n+\n+\n+\n const TabTitle = styled.h3`\n   font-size: 25px;\n   font-weight: bold;\n   margin-bottom: 12px;\n@@ -102,9 +108,8 @@\n   @media (max-width: ${Breakpoints.mobile}px) {\n     font-size: 18px;\n   }\n `;\n-\n const TabDescription = styled.p`\n   font-size: 16px;\n   color: #666;\n   line-height: 1.6;\n@@ -122,8 +127,46 @@\n   margin-bottom: 16px;\n   border-radius: 8px;\n `;\n \n+const FlexRow = styled.div`\n+  display: flex;\n+  width: 100%;\n+  justify-content: space-between;\n+`;\n+\n+const LeftColumn = styled.div`\n+  flex: 1;\n+  display: flex;\n+  flex-direction: column;\n+`;\n+\n+const RightColumn = styled.div`\n+  flex-shrink: 0;\n+  display: flex;\n+  flex-direction: column;\n+  justify-content: flex-end;\n+  align-items: flex-end;\n+  padding-bottom: 20px;\n+`;\n+\n+const DownloadLink = styled.a`\n+  font-size: 14px;\n+  color: #000000;\n+  cursor: pointer;\n+  display: flex;\n+  align-items: center;\n+  justify-content: flex-end;\n+  gap: 8px;\n+  text-decoration: none;\n+  animation: bounceY 1.5s ease-in-out infinite;\n+\n+  @keyframes bounceY {\n+    0%, 100% { transform: translateY(0px); }\n+    50% { transform: translateY(-10px); }\n+  }\n+`;\n+\n const MobileDownloadButton = styled.a`\n   display: inline-flex;\n   align-items: center;\n   width: 100%;\n@@ -138,28 +181,67 @@\n   gap: 6px;\n   margin-top: 0px;\n `;\n \n+const AnimatedDescription = styled.div`\n+  animation: fade 0.5s ease-in-out;\n+\n+  @keyframes fade {\n+    from { opacity: 0; transform: translateY(20px); }\n+    to { opacity: 1; transform: translateY(0); }\n+  }\n+`;\n+\n+const MobileContainer = styled.div`\n+  padding: 24px 20px;\n+`;\n+\n+const SlideWrapper = styled.div`\n+  margin-bottom: 100px;\n+\n+  &:last-of-type {\n+    margin-bottom: 0;\n+  }\n+`;\n+const logButtonClick = async (content: string, memo: string) => {\n+  try {\n+    await userStamp({\n+      uuid: localStorage.getItem('logId') ?? 'anonymous',\n+      category: '버튼',\n+      content,\n+      memo,\n+    });\n+  } catch (e) {\n+  }\n+};\n+\n+\n const Partner: React.FC<PartnerProps> = ({\n   title1,\n   title2,\n   subtitle,\n   tabs,\n   slides,\n   downloadText,\n   onEnterSection,\n-  sectionRef,\n }) => {\n   const { lang } = useLang();\n   const [activeTab, setActiveTab] = useState(0);\n+  const currentSlide = slides[activeTab];\n+  const leftRef = useRef<HTMLDivElement>(null);\n+  const rightRef = useRef<HTMLDivElement>(null);\n+  const sectionRef = useRef<HTMLDivElement>(null);\n+  const ignoreScroll = useRef(false);\n   const activeTabRef = useRef(activeTab);\n-  const ignoreScroll = useRef(false);\n+  const [isMobile, setIsMobile] = useState(false);\n   const lastLoggedIndex = useRef<number | null>(null);\n-  const [isMobile, setIsMobile] = useState(false);\n+\n   const slideRefs = useRef<(HTMLDivElement | null)[]>([]);\n \n   useEffect(() => {\n-    const checkMobile = () => setIsMobile(window.innerWidth < Breakpoints.mobile);\n+    const checkMobile = () => {\n+      setIsMobile(window.innerWidth < Breakpoints.mobile);\n+    };\n     checkMobile();\n     window.addEventListener('resize', checkMobile);\n     return () => window.removeEventListener('resize', checkMobile);\n   }, []);\n@@ -167,19 +249,20 @@\n   useEffect(() => {\n     activeTabRef.current = activeTab;\n   }, [activeTab]);\n \n-  // ✅ GSAP pin 적용\n   useEffect(() => {\n-    if (isMobile || !sectionRef?.current) return;\n+    if (isMobile || !leftRef.current || !rightRef.current || !sectionRef.current) return;\n \n-    const totalScroll = window.innerHeight * tabs.length;\n+    gsap.registerPlugin(ScrollTrigger);\n+    const slideHeight = window.innerHeight;\n+    const totalScroll = slideHeight * tabs.length;\n+\n     const lastScrollY = { current: window.scrollY };\n-\n     const ctx = gsap.context(() => {\n       ScrollTrigger.create({\n         id: 'partner-scroll',\n-        trigger: sectionRef.current, // ✅ 외부 section을 pin 대상으로\n+        trigger: sectionRef.current,\n         start: 'top top',\n         end: `+=${totalScroll}`,\n         scrub: true,\n         pin: true,\n@@ -210,88 +293,125 @@\n       });\n     }, sectionRef);\n \n     return () => ctx.revert();\n-  }, [isMobile, tabs.length, sectionRef]);\n+  }, [isMobile, tabs.length]);\n \n-  const getDownloadLink = (index: number) => {\n-    switch (index) {\n-      case 0: return downloadLinks.antiDroneProposal[lang];\n-      case 1: return downloadLinks.luxuryReverseAuctionProposal[lang];\n-      case 2: return downloadLinks.tradeProposal[lang];\n-      case 3: return downloadLinks.tableOrderProposal[lang];\n-      default: return '#';\n-    }\n-  };\n+  useEffect(() => {\n+    if (!isMobile || !onEnterSection) return;\n \n+    const observer = new IntersectionObserver(\n+      (entries) => {\n+        entries.forEach((entry) => {\n+          const index = slideRefs.current.findIndex((el) => el === entry.target);\n+          if (entry.isIntersecting && index !== -1 && index !== lastLoggedIndex.current) {\n+            lastLoggedIndex.current = index;\n+            onEnterSection(index, tabs[index]);\n+          }\n+        });\n+      },\n+      { threshold: 0.6 }\n+    );\n+\n+    slideRefs.current.forEach((el) => {\n+      if (el) observer.observe(el);\n+    });\n+    return () => {\n+      slideRefs.current.forEach((el) => {\n+        if (el) observer.unobserve(el);\n+      });\n+    };\n+  }, [isMobile, tabs, onEnterSection]);\n+\n   const handleTabClick = (index: number) => {\n     const trigger = ScrollTrigger.getById('partner-scroll');\n     if (!trigger) return;\n \n     ignoreScroll.current = true;\n     setActiveTab(index);\n     const scrollY = trigger.start + (trigger.end - trigger.start) * (index / tabs.length);\n     window.scrollTo({ top: scrollY, behavior: 'smooth' });\n+    logButtonClick('Partner', `탭: ${tabs[index]}`);\n     setTimeout(() => (ignoreScroll.current = false), 1000);\n   };\n \n+  const getDownloadLink = (index: number) => {\n+    switch (index) {\n+      case 0: return downloadLinks.antiDroneProposal[lang];\n+      case 1: return downloadLinks.luxuryReverseAuctionProposal[lang];\n+      case 2: return downloadLinks.tradeProposal[lang];\n+      case 3: return downloadLinks.tableOrderProposal[lang];\n+      default: return '#';\n+    }\n+  };\n+\n   return (\n     <ResponsiveView\n       desktopView={\n         <Wrapper>\n-          <CustomBlockLayout>\n-            <CustomBlockLayout.Left>\n+          <CustomBlockLayout ref={sectionRef}>\n+            <CustomBlockLayout.Left ref={leftRef}>\n               <Title>{`${title1}\\n${title2}`}</Title>\n               <Subtitle>{subtitle}</Subtitle>\n             </CustomBlockLayout.Left>\n-            <CustomBlockLayout.Right>\n+            <CustomBlockLayout.Right ref={rightRef}>\n               <Tabs>\n                 {tabs.map((tab, index) => (\n                   <Tab key={index} $active={activeTab === index} onClick={() => handleTabClick(index)}>\n                     {tab}\n                   </Tab>\n                 ))}\n               </Tabs>\n-              <div>\n-                <TabTitle>{slides[activeTab].subtitle}</TabTitle>\n-                <TabDescription dangerouslySetInnerHTML={{ __html: slides[activeTab].description }} />\n-                <a\n-                  href={getDownloadLink(activeTab)}\n-                  target=\"_blank\"\n-                  rel=\"noopener noreferrer\"\n-                >\n-                  {downloadText}\n-                  <DownloadIcon style={{ fontSize: '16px' }} />\n-                </a>\n-                <TabImage src={slides[activeTab].image} alt={slides[activeTab].title} />\n-              </div>\n+              <AnimatedDescription key={activeTab}>\n+                <FlexRow>\n+                  <LeftColumn>\n+                    <TabTitle>{currentSlide.subtitle}</TabTitle>\n+                    <TabDescription dangerouslySetInnerHTML={{ __html: currentSlide.description }} />\n+                  </LeftColumn>\n+                  <RightColumn>\n+                    <DownloadLink\n+                      href={getDownloadLink(activeTab)}\n+                      target=\"_blank\"\n+                      rel=\"noopener noreferrer\"\n+                      onClick={() => logButtonClick('Partner', `다운로드: ${tabs[activeTab]}`)}\n+                    >\n+                      {downloadText}\n+                      <DownloadIcon style={{ fontSize: '16px' }} />\n+                    </DownloadLink>\n+                  </RightColumn>\n+                </FlexRow>\n+                <TabImage src={currentSlide.image} alt={currentSlide.title} />\n+              </AnimatedDescription>\n             </CustomBlockLayout.Right>\n           </CustomBlockLayout>\n         </Wrapper>\n       }\n       mobileView={\n-        <div style={{ padding: '24px 20px' }}>\n-          <Title>{`${title1}\\n${title2}`}</Title>\n+        <MobileContainer>\n+          <Title style={{ whiteSpace: 'pre-line' }}>{`${title1}\\n${title2}`}</Title>\n           <Subtitle>{subtitle}</Subtitle>\n           {slides.map((slide, index) => (\n-            <div key={index} ref={(el) => {\n-              slideRefs.current[index] = el;\n-            }}\n+            <SlideWrapper\n+              key={index}\n+              ref={(el) => {\n+                slideRefs.current[index] = el;\n+              }}\n             >\n               <TabTitle>{tabs[index]}</TabTitle>\n               <TabDescription>{slide.description.replace(/<br\\s*\\/?>/gi, '')}</TabDescription>\n               <MobileDownloadButton\n                 href={getDownloadLink(index)}\n                 target=\"_blank\"\n                 rel=\"noopener noreferrer\"\n+                onClick={() => logButtonClick('Partner', `다운로드: ${tabs[index]}`)}\n               >\n                 {downloadText}\n                 <DownloadIcon style={{ fontSize: '16px' }} />\n               </MobileDownloadButton>\n               <TabImage src={slide.image} alt={slide.title} />\n-            </div>\n+            </SlideWrapper>\n           ))}\n-        </div>\n+        </MobileContainer>\n       }\n     />\n   );\n };\n"
                },
                {
                    "date": 1747965465924,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,418 @@\n+'use client';\n+\n+import React, { useState, useRef, useEffect } from 'react';\n+import styled from 'styled-components';\n+import { gsap } from 'gsap';\n+import { ScrollTrigger } from 'gsap/ScrollTrigger';\n+import DownloadIcon from '@mui/icons-material/Download';\n+import { useLang } from '@/contexts/LangContext';\n+import { downloadLinks } from '@/lib/i18n/downloadLinks';\n+import { AppColors } from '@/styles/colors';\n+import { AppTextStyles } from '@/styles/textStyles';\n+import CustomBlockLayout from '@/customComponents/CustomBlockLayout';\n+import ResponsiveView from '@/layout/ResponsiveView';\n+import { Breakpoints } from '@/constants/layoutConstants';\n+import { userStamp } from '@/lib/api/user/api';\n+\n+interface PartnerProps {\n+  title1: string;\n+  title2: string;\n+  subtitle: string;\n+  tabs: string[];\n+  slides: {\n+    title: string;\n+    image: string;\n+    subtitle: string;\n+    description: string;\n+  }[];\n+  downloadText: string;\n+  onEnterSection?: (index: number, tab: string) => void;\n+}\n+\n+const Title = styled.h2`\n+  ${AppTextStyles.headline2};\n+  color: ${AppColors.onSurface};\n+  margin-bottom: 0px;\n+  line-height: 1.2;\n+  white-space: pre-line;\n+\n+  @media (max-width: ${Breakpoints.mobile}px) {\n+    font-size: 25px;\n+  }\n+`;\n+\n+const Subtitle = styled.p`\n+  font-size: 16px;\n+  color: #666;\n+  line-height: 1.6;\n+  white-space: pre-line;\n+  margin-bottom: 100px; /* ✅ 모바일 간격 */\n+\n+  @media (max-width: ${Breakpoints.mobile}px) {\n+    font-size: 14px;\n+    white-space: normal;\n+  }\n+`;\n+\n+const Tabs = styled.div`\n+  display: flex;\n+  gap: 24px;\n+  margin-bottom: 10px;\n+  flex-wrap: wrap;\n+`;\n+\n+const Tab = styled.div<{ $active: boolean }>`\n+  font-size: 16px;\n+  font-weight: ${({ $active }) => ($active ? 'bold' : 'normal')};\n+  border-bottom: ${({ $active }) => ($active ? '2px solid #000' : 'none')};\n+  padding-bottom: 4px;\n+  cursor: pointer;\n+  color: ${({ $active }) => ($active ? '#000' : '#888')};\n+`;\n+\n+const Slide = styled.div<{ $isActive: boolean }>`\n+  display: ${({ $isActive }) => ($isActive ? 'block' : 'none')};\n+`;\n+\n+const Wrapper = styled.div`\n+  min-width: ${Breakpoints.desktop}px; \n+  background-color: #fff;\n+\n+  @media (max-width: ${Breakpoints.mobile}px) {\n+    min-width: 100%;\n+  }\n+\n+`;\n+\n+\n+\n+const TabTitle = styled.h3`\n+  font-size: 25px;\n+  font-weight: bold;\n+  margin-bottom: 12px;\n+  position: relative;\n+  padding-left: 16px;\n+  color: #000;\n+\n+  &::before {\n+    content: '';\n+    position: absolute;\n+    left: 0;\n+    top: 50%;\n+    transform: translateY(-50%);\n+    width: 8px;\n+    height: 24px;\n+    background-color: #000000;\n+  }\n+\n+  @media (max-width: ${Breakpoints.mobile}px) {\n+    font-size: 18px;\n+  }\n+`;\n+const TabDescription = styled.p`\n+  font-size: 16px;\n+  color: #666;\n+  line-height: 1.6;\n+  margin-top: 8px;\n+\n+  @media (max-width: ${Breakpoints.mobile}px) {\n+    font-size: 14px;\n+  }\n+`;\n+\n+const TabImage = styled.img`\n+  width: 100%;\n+  height: auto;\n+  margin-top: 16px;\n+  margin-bottom: 16px;\n+  border-radius: 8px;\n+`;\n+\n+const FlexRow = styled.div`\n+  display: flex;\n+  width: 100%;\n+  justify-content: space-between;\n+`;\n+\n+const LeftColumn = styled.div`\n+  flex: 1;\n+  display: flex;\n+  flex-direction: column;\n+`;\n+\n+const RightColumn = styled.div`\n+  flex-shrink: 0;\n+  display: flex;\n+  flex-direction: column;\n+  justify-content: flex-end;\n+  align-items: flex-end;\n+  padding-bottom: 20px;\n+`;\n+\n+const DownloadLink = styled.a`\n+  font-size: 14px;\n+  color: #000000;\n+  cursor: pointer;\n+  display: flex;\n+  align-items: center;\n+  justify-content: flex-end;\n+  gap: 8px;\n+  text-decoration: none;\n+  animation: bounceY 1.5s ease-in-out infinite;\n+\n+  @keyframes bounceY {\n+    0%, 100% { transform: translateY(0px); }\n+    50% { transform: translateY(-10px); }\n+  }\n+`;\n+\n+const MobileDownloadButton = styled.a`\n+  display: inline-flex;\n+  align-items: center;\n+  width: 100%;\n+  justify-content: center;\n+  padding: 10px 16px;\n+  font-size: 14px;\n+  font-weight: 600;\n+  color: #000;\n+  border: 1px solid #ccc;\n+  border-radius: 6px;\n+  text-decoration: none;\n+  gap: 6px;\n+  margin-top: 0px;\n+`;\n+\n+const AnimatedDescription = styled.div`\n+  animation: fade 0.5s ease-in-out;\n+\n+  @keyframes fade {\n+    from { opacity: 0; transform: translateY(20px); }\n+    to { opacity: 1; transform: translateY(0); }\n+  }\n+`;\n+\n+const MobileContainer = styled.div`\n+  padding: 24px 20px;\n+`;\n+\n+const SlideWrapper = styled.div`\n+  margin-bottom: 100px;\n+\n+  &:last-of-type {\n+    margin-bottom: 0;\n+  }\n+`;\n+const logButtonClick = async (content: string, memo: string) => {\n+  try {\n+    await userStamp({\n+      category: '버튼',\n+      content,\n+      memo,\n+    });\n+  } catch (e) {\n+  }\n+};\n+\n+\n+const Partner: React.FC<PartnerProps> = ({\n+  title1,\n+  title2,\n+  subtitle,\n+  tabs,\n+  slides,\n+  downloadText,\n+  onEnterSection,\n+}) => {\n+  const { lang } = useLang();\n+  const [activeTab, setActiveTab] = useState(0);\n+  const currentSlide = slides[activeTab];\n+  const leftRef = useRef<HTMLDivElement>(null);\n+  const rightRef = useRef<HTMLDivElement>(null);\n+  const sectionRef = useRef<HTMLDivElement>(null);\n+  const ignoreScroll = useRef(false);\n+  const activeTabRef = useRef(activeTab);\n+  const [isMobile, setIsMobile] = useState(false);\n+  const lastLoggedIndex = useRef<number | null>(null);\n+\n+  const slideRefs = useRef<(HTMLDivElement | null)[]>([]);\n+\n+  useEffect(() => {\n+    const checkMobile = () => {\n+      setIsMobile(window.innerWidth < Breakpoints.mobile);\n+    };\n+    checkMobile();\n+    window.addEventListener('resize', checkMobile);\n+    return () => window.removeEventListener('resize', checkMobile);\n+  }, []);\n+\n+  useEffect(() => {\n+    activeTabRef.current = activeTab;\n+  }, [activeTab]);\n+\n+  useEffect(() => {\n+    if (isMobile || !leftRef.current || !rightRef.current || !sectionRef.current) return;\n+\n+    gsap.registerPlugin(ScrollTrigger);\n+    const slideHeight = window.innerHeight;\n+    const totalScroll = slideHeight * tabs.length;\n+\n+    const lastScrollY = { current: window.scrollY };\n+    const ctx = gsap.context(() => {\n+      ScrollTrigger.create({\n+        id: 'partner-scroll',\n+        trigger: sectionRef.current,\n+        start: 'top top',\n+        end: `+=${totalScroll}`,\n+        scrub: true,\n+        pin: true,\n+        onUpdate: (self) => {\n+          const progress = self.progress;\n+          let index = Math.floor(progress * tabs.length);\n+          index = Math.min(index, tabs.length - 1);\n+\n+          const currentScrollY = window.scrollY;\n+          const isScrollingDown = currentScrollY > lastScrollY.current;\n+          lastScrollY.current = currentScrollY;\n+\n+          if (!ignoreScroll.current) {\n+            if (index !== activeTabRef.current) {\n+              setActiveTab(index);\n+            }\n+\n+            if (\n+              isScrollingDown &&\n+              index !== lastLoggedIndex.current &&\n+              currentScrollY > self.start\n+            ) {\n+              lastLoggedIndex.current = index;\n+              onEnterSection?.(index, tabs[index]);\n+            }\n+          }\n+        },\n+      });\n+    }, sectionRef);\n+\n+    return () => ctx.revert();\n+  }, [isMobile, tabs.length]);\n+\n+  useEffect(() => {\n+    if (!isMobile || !onEnterSection) return;\n+\n+    const observer = new IntersectionObserver(\n+      (entries) => {\n+        entries.forEach((entry) => {\n+          const index = slideRefs.current.findIndex((el) => el === entry.target);\n+          if (entry.isIntersecting && index !== -1 && index !== lastLoggedIndex.current) {\n+            lastLoggedIndex.current = index;\n+            onEnterSection(index, tabs[index]);\n+          }\n+        });\n+      },\n+      { threshold: 0.6 }\n+    );\n+\n+    slideRefs.current.forEach((el) => {\n+      if (el) observer.observe(el);\n+    });\n+    return () => {\n+      slideRefs.current.forEach((el) => {\n+        if (el) observer.unobserve(el);\n+      });\n+    };\n+  }, [isMobile, tabs, onEnterSection]);\n+\n+  const handleTabClick = (index: number) => {\n+    const trigger = ScrollTrigger.getById('partner-scroll');\n+    if (!trigger) return;\n+\n+    ignoreScroll.current = true;\n+    setActiveTab(index);\n+    const scrollY = trigger.start + (trigger.end - trigger.start) * (index / tabs.length);\n+    window.scrollTo({ top: scrollY, behavior: 'smooth' });\n+    logButtonClick('Partner', `탭: ${tabs[index]}`);\n+    setTimeout(() => (ignoreScroll.current = false), 1000);\n+  };\n+\n+  const getDownloadLink = (index: number) => {\n+    switch (index) {\n+      case 0: return downloadLinks.antiDroneProposal[lang];\n+      case 1: return downloadLinks.luxuryReverseAuctionProposal[lang];\n+      case 2: return downloadLinks.tradeProposal[lang];\n+      case 3: return downloadLinks.tableOrderProposal[lang];\n+      default: return '#';\n+    }\n+  };\n+\n+  return (\n+    <ResponsiveView\n+      desktopView={\n+        <Wrapper>\n+          <CustomBlockLayout ref={sectionRef}>\n+            <CustomBlockLayout.Left ref={leftRef}>\n+              <Title>{`${title1}\\n${title2}`}</Title>\n+              <Subtitle>{subtitle}</Subtitle>\n+            </CustomBlockLayout.Left>\n+            <CustomBlockLayout.Right ref={rightRef}>\n+              <Tabs>\n+                {tabs.map((tab, index) => (\n+                  <Tab key={index} $active={activeTab === index} onClick={() => handleTabClick(index)}>\n+                    {tab}\n+                  </Tab>\n+                ))}\n+              </Tabs>\n+              <AnimatedDescription key={activeTab}>\n+                <FlexRow>\n+                  <LeftColumn>\n+                    <TabTitle>{currentSlide.subtitle}</TabTitle>\n+                    <TabDescription dangerouslySetInnerHTML={{ __html: currentSlide.description }} />\n+                  </LeftColumn>\n+                  <RightColumn>\n+                    <DownloadLink\n+                      href={getDownloadLink(activeTab)}\n+                      target=\"_blank\"\n+                      rel=\"noopener noreferrer\"\n+                      onClick={() => logButtonClick('Partner', `다운로드: ${tabs[activeTab]}`)}\n+                    >\n+                      {downloadText}\n+                      <DownloadIcon style={{ fontSize: '16px' }} />\n+                    </DownloadLink>\n+                  </RightColumn>\n+                </FlexRow>\n+                <TabImage src={currentSlide.image} alt={currentSlide.title} />\n+              </AnimatedDescription>\n+            </CustomBlockLayout.Right>\n+          </CustomBlockLayout>\n+        </Wrapper>\n+      }\n+      mobileView={\n+        <MobileContainer>\n+          <Title style={{ whiteSpace: 'pre-line' }}>{`${title1}\\n${title2}`}</Title>\n+          <Subtitle>{subtitle}</Subtitle>\n+          {slides.map((slide, index) => (\n+            <SlideWrapper\n+              key={index}\n+              ref={(el) => {\n+                slideRefs.current[index] = el;\n+              }}\n+            >\n+              <TabTitle>{tabs[index]}</TabTitle>\n+              <TabDescription>{slide.description.replace(/<br\\s*\\/?>/gi, '')}</TabDescription>\n+              <MobileDownloadButton\n+                href={getDownloadLink(index)}\n+                target=\"_blank\"\n+                rel=\"noopener noreferrer\"\n+                onClick={() => logButtonClick('Partner', `다운로드: ${tabs[index]}`)}\n+              >\n+                {downloadText}\n+                <DownloadIcon style={{ fontSize: '16px' }} />\n+              </MobileDownloadButton>\n+              <TabImage src={slide.image} alt={slide.title} />\n+            </SlideWrapper>\n+          ))}\n+        </MobileContainer>\n+      }\n+    />\n+  );\n+};\n+\n+export default Partner;\n"
                }
            ],
            "date": 1747725449250,
            "name": "Commit-0",
            "content": "'use client';\n\nimport React, { useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport Image from 'next/image';\nimport { Breakpoints } from '@/constants/layoutConstants';\nimport { AppColors } from '@/styles/colors';\nimport { CustomNavigator } from '@/customComponents/CustomNavigator';\n\ninterface EventBlockProps {\n  slides: { image: string }[];\n  topLabel: string;\n  centerLabel: string;\n  bottomLabel: string;\n  title: string;\n  description: string;\n  onTopArrowClick?: () => void;\n  onBottomArrowClick?: () => void;\n}\n\nconst Wrapper = styled.div`\n  width: 100%;\n  min-width: ${Breakpoints.desktop}px;\n  background-color: ${AppColors.background};\n`;\n\nconst Content = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 100px;\n`;\n\nconst ImageBox = styled.div`\n  width: 1200px;\n  height: 600px;\n  border-radius: 16px;\n  overflow: hidden;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);\n`;\n\nexport default function EventBlock({\n  slides,\n  topLabel,\n  centerLabel,\n  bottomLabel,\n  title,\n  description,\n  onTopArrowClick,\n  onBottomArrowClick,\n}: EventBlockProps) {\n  const [isMobile, setIsMobile] = useState(false);\n\n  useEffect(() => {\n    const checkMobile = () => {\n      setIsMobile(window.innerWidth < Breakpoints.mobile);\n    };\n    checkMobile();\n    window.addEventListener('resize', checkMobile);\n    return () => window.removeEventListener('resize', checkMobile);\n  }, []);\n\n  const getImageSrc = (src: string) => {\n    if (!isMobile) return src;\n\n    // \"example/image01.jpg\" → \"example/image01_m.jpg\"\n    const lastDot = src.lastIndexOf('.');\n    if (lastDot === -1) return src;\n    return src.slice(0, lastDot) + '_m' + src.slice(lastDot);\n  };\n\n  return (\n    <Wrapper>\n      <CustomNavigator\n        topLabel={topLabel}\n        centerLabel={centerLabel}\n        bottomLabel={bottomLabel}\n        title={title}\n        description={description}\n        onTopArrowClick={onTopArrowClick}\n        onBottomArrowClick={onBottomArrowClick}\n      />\n\n      <Content>\n        {slides.map((slide, i) => (\n          <ImageBox key={i}>\n            <Image\n              src={getImageSrc(slide.image)}\n              alt=\"\"\n              width={1200}\n              height={600}\n              style={{ objectFit: 'cover' }}\n            />\n          </ImageBox>\n        ))}\n      </Content>\n    </Wrapper>\n  );\n}\n"
        }
    ]
}